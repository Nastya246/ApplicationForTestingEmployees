@model IEnumerable<WebApplicationForTest.Models.Вопросы>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{ int T = 0;}
<h2><big>Тест "@ViewBag.НазваниеТеста"</big></h2> <br /><br />


<form method="post" action="~/Результат_теста/Index">
    <input type="hidden" value=@ViewBag.IdТеста name="id_test" />
    <table class="table">
        <tr>

            <th><big>Выберите верный ответ</big><br /><br /></th>


           
        </tr>

        @foreach (var item in Model)

        {
            if ((item.Тип_ответа.Replace(" ", "") != "Соотношение") && (item.Тип_ответа.Replace(" ", "") != "Разрыв"))
            {
                <tr>
                    <td>
                        <br /><br /><big> @Html.DisplayFor(m => item.Текст_вопроса)</big><br /><br />
                    </td>

                </tr>
            }
            else if (item.Тип_ответа.Replace(" ", "") != "Разрыв")
            {

                <tr>


                    <td>

                        <br /><br /><big> @Html.DisplayFor(m => item.Текст_вопроса)</big><br /><br />
                    </td>

                </tr>
                <tr>
                    <td>
                        @foreach (var itemS in item.Ответы)
                        {

                            if (itemS.Флаг_подвопроса == false)
                            {
                                <em>
                                    @Html.DisplayFor(m => itemS.Текст_ответа)
                                </em>
                            }

                            if (itemS.Флаг_подвопроса == true)
                            {
                                <b>
                                    @Html.DisplayFor(m => itemS.Текст_ответа)
                                </b>
                            }
                        }
                    </td>
                </tr>

            }
            else
            {

                <tr>
                    <td>
                        <br /><br />
                        @foreach (var part in item.Текст_вопроса.Replace("  ", "").Split(new string[] { "..." }, StringSplitOptions.RemoveEmptyEntries))
                        {
                            <big>
                                @part
                            </big>
                            if (part != item.Текст_вопроса.Replace("  ", "").Split(new string[] { "..." }, StringSplitOptions.RemoveEmptyEntries).Last().ToString())
                            {
                                @Html.DropDownList(item.id_вопроса.ToString(), ViewData[T.ToString()] as SelectList, "--Выбор ответа--", new { id = "ans" })
                            }
                        }
                    </td>
                </tr>
                T++;
            }
            foreach (var itemO in item.Ответы)
            {
                if (item.Тип_ответа.Replace(" ", "") == "Выбор")
                {

                    <tr>
                        <td>
                            @Html.DisplayFor(m => itemO.Текст_ответа)
                        </td>
                        <td>

                            @Html.RadioButton((item.id_вопроса).ToString(), itemO.Текст_ответа)
                        </td>
                    </tr>
                }
                else if (item.Тип_ответа.Replace(" ", "") == "Ввод")
                {

                    <tr>
                        <td><p>Введите ответ без посторонних знаков: </p> </td>
                        <td><input type="text" name=@item.id_вопроса /></td>
                    </tr>
                }
                else if (item.Тип_ответа.Replace(" ", "") == "Соотношение")
                {
                    <tr>
                        <td><input type="hidden" value=@item.id_вопроса name="id_Q" /></td>
                    </tr>
                    <tr>
                        @if (itemO.Флаг_подвопроса == true)
                        {

                            <td> @Html.DisplayFor(m => itemO.Текст_ответа) </td>
                            <td><input type="text" name=@itemO.id_ответа /></td>
                        }
                    </tr>
                }
                else if (item.Тип_ответа.Replace(" ", "") == "Несколько")
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(m => itemO.Текст_ответа)
                        </td>
                        <td>
                            @Html.CheckBox(item.id_вопроса.ToString(), false)

                        </td>
                    </tr>
                }

            }


        }

        <tr><td><br /><br /><input type="submit" value="Отправить" /> </td><td></td></tr>

    </table>
</form>
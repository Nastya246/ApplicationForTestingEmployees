@model  WebApplicationForTest.Models.Подразделение
@{
    ViewBag.Title = "NewUser";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

    <div>

        <link href='@Url.Content("~/Content/themes/base/all.css")' rel="stylesheet" type="text/css" />
        <script src='@Url.Content("~/Scripts/jquery-ui-1.12.1.min.js")' type="text/javascript"></script>
        <h3>Введите свои данные</h3><br /><br />

        <form method="post" action="AddUser">
            <table>
                <tr>
                    <td><p>Фамилия:</p></td>
                    <td><input type="text" name="LastName" /></td>
                </tr>
                <tr>
                    <td><p>Имя: </p> </td>
                    <td><input type="text" name="FirstName" /></td>
                </tr>
                <tr>
                    <td>
                        <p>Отчество: </p>
                    </td>
                    <td><input type="text" name="Otchectvo" /></td>
                </tr>
                <tr>


                    <td>

                        <p>Выберите подразделение</p>
                        @Html.DropDownList("Units", ViewBag.Подразделения as SelectList, "--Выбор подразделения--", new { id = "unit" })
                    </td>
                </tr>
                <tr>
                    <td>
                        <p>Выберите должность</p>
                        @Html.DropDownList("Position", ViewBag.Должности as SelectList, "--Выбор должности--", new { id = "position" })

                    </td>
                </tr>
                <tr>
                    <td>
                        <p><big>Дата:@DateTime.Now.ToString("yyyy/MM/dd") </big></p><br />
                        <input type="hidden" value="@DateTime.Now.ToString("yyyy/MM/dd")" name="Date" />
                    </td>

                </tr>
                <tr><td><input type="submit" value="Далее" /> </td><td></td></tr>
            </table>

        </form>
        @section scripts{
            <script type="text/javascript">
    $(function () {

        $('#unit').change(function()
        {
            // получаем выбранный id
            var id = $(this).val();
            $.ajax({
                type: 'GET',
                url: '@Url.Action("GetItems")/' + id,
                success: function (data) {

                    // заменяем содержимое присланным частичным представлением
                    $('#position').replaceWith(data);
                }
            });
        });
    })
            </script>
        }
    </div>

